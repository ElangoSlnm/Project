{"ast":null,"code":"var _jsxFileName = \"/opt/rpx/react_ui/src/module/Home.js\";\nimport React, { Component } from 'react';\nimport logo from '../resource/rpx-insight-logo.png';\nimport ReactTable from \"react-table-6\";\nimport \"react-table-6/react-table.css\";\nimport '../css/Home.css';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      sentence: null,\n      field: 'tit_vector',\n      limit: null,\n      loading: false\n    };\n  }\n\n  generate_talbe(result) {\n    // console.log('responce:' + JSON.stringify(result))\n    let _item = [];\n    result.forEach((items, index) => {\n      let item = items._source;\n\n      _item.push({\n        'cpc_full': /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 29\n          }\n        }, item.cpc_full),\n        'issued_date_or_app_filing_date': /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 51\n          }\n        }, item.issued_date_or_app_filing_date),\n        'pat_id': /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 27\n          }\n        }, item.pat_id),\n        'title': /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 26\n          }\n        }, item.title),\n        'patnum': /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: \"https://analyst.rpxcorp.com/#/patent/\" + item.patnum,\n          className: \"link\",\n          target: \"new\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 49\n          }\n        }, item.patnum)),\n        'score': /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 26\n          }\n        }, items._score.toFixed(2))\n      });\n    });\n    this.setState({\n      isLoaded: true,\n      items: _item,\n      loading: false\n    });\n  }\n\n  search_patent(event) {\n    event.preventDefault();\n    console.log(\"Keyword: \" + this.state.sentence + \"; Search Field: \" + this.state.field + \"; Limit: \" + this.state.limit);\n\n    if (this.state.sentence !== null && this.state.field !== null && this.state.limit !== null) {\n      this.setState({\n        loading: true\n      });\n      console.log('Api called.');\n      let api = 'http://prod-spark-node1:1212/search?index=pat-index&keyword=' + this.state.sentence + '&search_field=' + this.state.field + '&limit=' + this.state.limit;\n      fetch(api).then(res => res.json()).then(response => {\n        if (response.status) {\n          this.generate_talbe(response.result);\n          console.log('SUCCESS: ' + response.result.length);\n        } else {\n          console.log(response.error);\n          this.setState({\n            loading: false\n          });\n        }\n      }, error => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n        console.log('ERROR: ' + error);\n        this.setState({\n          loading: false\n        });\n      });\n    } else {\n      console.log('Empty field.');\n    }\n  }\n\n  componentDidMount() {\n    let test_item = JSON.parse('[{\"_index\": \"pat-index\", \"_type\": \"_doc\", \"_id\": \"9749188\", \"_score\": 0.88840634, \"_source\": {\"cpc_full\": \"B42D15/0033\", \"issued_date_or_app_filing_date\": \"1944-02-29\", \"pat_id\": 9749188, \"title\": \"Insurance policy\", \"patnum\": \"US2342981A\"}}, {\"_index\": \"pat-index\", \"_type\": \"_doc\", \"_id\": \"12120408\", \"_score\": 0.88840634, \"_source\": {\"cpc_full\": \"B42D15/0033\", \"issued_date_or_app_filing_date\": \"1941-12-23\", \"pat_id\": 12120408, \"title\": \"Insurance policy\", \"patnum\": \"US2267507A\"}}]');\n    let _item = [];\n    this.generate_talbe(_item);\n  }\n\n  set_limit(event) {\n    this.setState({\n      limit: event.target.value\n    }); // console.log('Limit set to:' + event.target.value)\n  }\n\n  set_sentence(event) {\n    this.setState({\n      sentence: event.target.value\n    }); // console.log('Keyword set to:' + event.target.value)\n  }\n\n  set_field(event) {\n    this.setState({\n      field: event.target.value\n    }); // console.log('Filed set to:' + event.target.value)\n  }\n\n  render() {\n    const columns = [{\n      Header: 'ID #',\n      accessor: 'pat_id',\n      headerClassName: 'table-header',\n      maxWidth: 120\n    }, {\n      Header: 'PATNUM',\n      accessor: 'patnum',\n      maxWidth: 170,\n      headerClassName: 'table-header',\n      footerClassName: 'table-header'\n    }, {\n      Header: 'TITLE',\n      accessor: 'title',\n      headerClassName: 'table-header'\n    }, {\n      Header: 'ISSUED/FILING DATE',\n      accessor: 'issued_date_or_app_filing_date',\n      headerClassName: 'table-header',\n      maxWidth: 180\n    }, {\n      Header: 'CPC FULL',\n      accessor: 'cpc_full',\n      headerClassName: 'table-header',\n      maxWidth: 150\n    }, {\n      Header: 'SCORE',\n      accessor: 'score',\n      headerClassName: 'table-header',\n      maxWidth: 80\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"rpx-insight-logo\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, \"Patent Knn Search\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"App-cont-pane\",\n      onSubmit: () => this.search_patent(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-pane-tap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left-cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"key_work\",\n      placeholder: \"search keyword\",\n      onChange: () => this.set_sentence(event),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right-cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"select_filed\",\n      onChange: () => this.set_field(event),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      className: \"opt\",\n      value: \"tit_vector\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 37\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(\"option\", {\n      className: \"opt\",\n      value: \"abs_vector\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 37\n      }\n    }, \"Abstract\"), /*#__PURE__*/React.createElement(\"option\", {\n      className: \"opt\",\n      value: \"tit_abs_vector\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 37\n      }\n    }, \"Title + Abstract\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"limit\",\n      min: \"1\",\n      max: \"1000\",\n      placeholder: \"Limit\",\n      onChange: () => this.set_limit(event),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-pane-tap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"App-search\",\n      value: \"search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-pane-tap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(ReactTable, {\n      data: this.state.items,\n      columns: columns,\n      defaultPageSize: 5,\n      pageSizeOptions: [5, 10, 50, 100, 1000],\n      className: \"App-table\",\n      showPagination: true,\n      loading: this.state.loading,\n      filterable: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/opt/rpx/react_ui/src/module/Home.js"],"names":["React","Component","logo","ReactTable","Home","constructor","props","state","error","isLoaded","items","sentence","field","limit","loading","generate_talbe","result","_item","forEach","index","item","_source","push","cpc_full","issued_date_or_app_filing_date","pat_id","title","patnum","_score","toFixed","setState","search_patent","event","preventDefault","console","log","api","fetch","then","res","json","response","status","length","componentDidMount","test_item","JSON","parse","set_limit","target","value","set_sentence","set_field","render","columns","Header","accessor","headerClassName","maxWidth","footerClassName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport logo from '../resource/rpx-insight-logo.png';\nimport ReactTable from \"react-table-6\";\nimport \"react-table-6/react-table.css\";\nimport '../css/Home.css';\n\nclass Home extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: null,\n            isLoaded: false,\n            items: [],\n            sentence: null,\n            field: 'tit_vector',\n            limit: null,\n            loading: false\n        };\n    }\n\n    generate_talbe(result) {\n        // console.log('responce:' + JSON.stringify(result))\n        let _item = []\n        result.forEach((items, index) => {\n            let item = items._source\n            _item.push({\n                'cpc_full': <div className=\"cell\">{item.cpc_full}</div>,\n                'issued_date_or_app_filing_date': <div className=\"cell\">{item.issued_date_or_app_filing_date}</div>,\n                'pat_id': <div className=\"cell\">{item.pat_id}</div>,\n                'title': <div className=\"cell\">{item.title}</div>,\n                'patnum': <div className=\"cell\"><a href={\"https://analyst.rpxcorp.com/#/patent/\" + item.patnum} className=\"link\" target=\"new\">{item.patnum}</a></div>,\n                'score': <div className=\"cell\">{items._score.toFixed(2)}</div>\n            })\n        })\n\n        this.setState({\n            isLoaded: true,\n            items: _item,\n            loading: false\n        });\n    }\n\n    search_patent(event) {\n        event.preventDefault()\n        console.log(\"Keyword: \" + this.state.sentence + \"; Search Field: \" + this.state.field + \"; Limit: \" + this.state.limit)\n        if (this.state.sentence !== null && this.state.field !== null && this.state.limit !== null) {\n            this.setState({ loading: true })\n            console.log('Api called.')\n            let api = 'http://prod-spark-node1:1212/search?index=pat-index&keyword=' + this.state.sentence + '&search_field=' + this.state.field + '&limit=' + this.state.limit\n            fetch(api)\n                .then(res => res.json())\n                .then(\n                    (response) => {\n                        if (response.status) {\n                            this.generate_talbe(response.result)\n                            console.log('SUCCESS: ' + response.result.length)\n                        } else {\n                            console.log(response.error)\n                            this.setState({ loading: false })\n                        }\n                    },\n                    (error) => {\n                        this.setState({\n                            isLoaded: true,\n                            error\n                        });\n                        console.log('ERROR: ' + error);\n                        this.setState({ loading: false })\n                    }\n                )\n        } else {\n            console.log('Empty field.')\n        }\n    }\n\n    componentDidMount() {\n        let test_item = JSON.parse('[{\"_index\": \"pat-index\", \"_type\": \"_doc\", \"_id\": \"9749188\", \"_score\": 0.88840634, \"_source\": {\"cpc_full\": \"B42D15/0033\", \"issued_date_or_app_filing_date\": \"1944-02-29\", \"pat_id\": 9749188, \"title\": \"Insurance policy\", \"patnum\": \"US2342981A\"}}, {\"_index\": \"pat-index\", \"_type\": \"_doc\", \"_id\": \"12120408\", \"_score\": 0.88840634, \"_source\": {\"cpc_full\": \"B42D15/0033\", \"issued_date_or_app_filing_date\": \"1941-12-23\", \"pat_id\": 12120408, \"title\": \"Insurance policy\", \"patnum\": \"US2267507A\"}}]')\n        let _item = []\n        this.generate_talbe(_item)\n    }\n\n    set_limit(event) {\n        this.setState({ limit: event.target.value })\n        // console.log('Limit set to:' + event.target.value)\n    }\n\n    set_sentence(event) {\n        this.setState({ sentence: event.target.value })\n        // console.log('Keyword set to:' + event.target.value)\n    }\n\n    set_field(event) {\n        this.setState({ field: event.target.value })\n        // console.log('Filed set to:' + event.target.value)\n    }\n\n    render() {\n        const columns = [\n            {\n                Header: 'ID #',\n                accessor: 'pat_id',\n                headerClassName: 'table-header',\n                maxWidth: 120\n            },\n            {\n                Header: 'PATNUM',\n                accessor: 'patnum',\n                maxWidth: 170,\n                headerClassName: 'table-header',\n                footerClassName: 'table-header'\n            },\n            {\n                Header: 'TITLE',\n                accessor: 'title',\n                headerClassName: 'table-header',\n            },\n            {\n                Header: 'ISSUED/FILING DATE',\n                accessor: 'issued_date_or_app_filing_date',\n                headerClassName: 'table-header',\n                maxWidth: 180\n            },\n            {\n                Header: 'CPC FULL',\n                accessor: 'cpc_full',\n                headerClassName: 'table-header',\n                maxWidth: 150\n            },\n            {\n                Header: 'SCORE',\n                accessor: 'score',\n                headerClassName: 'table-header',\n                maxWidth: 80\n            }]\n        return (\n            <div className=\"App\">\n                <div className=\"App-header\">\n                    <img src={logo} className=\"rpx-insight-logo\" alt=\"logo\" />\n                    <div className=\"App-title\">Patent Knn Search</div>\n                </div>\n                <div className=\"App-container\">\n                    <form className=\"App-cont-pane\" onSubmit={() => this.search_patent(event)}>\n                        <div className=\"App-pane-tap\">\n                            <div className=\"left-cont\">\n                                <input type=\"text\" className=\"key_work\" placeholder=\"search keyword\" onChange={() => this.set_sentence(event)} required />\n                            </div>\n                            <div className=\"right-cont\">\n                                <select className=\"select_filed\" onChange={() => this.set_field(event)} required>\n                                    <option className=\"opt\" value=\"tit_vector\">Title</option>\n                                    <option className=\"opt\" value=\"abs_vector\">Abstract</option>\n                                    <option className=\"opt\" value=\"tit_abs_vector\">Title + Abstract</option>\n                                </select>\n                                <input type=\"number\" className=\"limit\" min=\"1\" max=\"1000\" placeholder=\"Limit\" onChange={() => this.set_limit(event)} required />\n                            </div>\n                        </div>\n                        <div className=\"App-pane-tap\">\n                            <input type=\"submit\" className=\"App-search\" value=\"search\" />\n                        </div>\n                        <div className=\"App-pane-tap\">\n                            <ReactTable data={this.state.items} columns={columns} defaultPageSize={5}\n                                pageSizeOptions={[5, 10, 50, 100, 1000]} className=\"App-table\" showPagination={true}\n                                loading={this.state.loading} filterable={false}\n                            />\n                        </div>\n                    </form>\n                </div>\n            </div >\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}